---
title: '''[!DNL Adobe Commerce B2B] リリースノート'
description: の変更点について詳しくは、リリースノートを参照してください [!DNL Adobe Commerce B2B] リリース。
exl-id: 77d8c20d-6667-41e3-8889-252f36e56fd8
feature: B2B, Release Notes
source-git-commit: 35402eda770e59cc2862b204e6e54b55190ded13
workflow-type: tm+mt
source-wordcount: '6867'
ht-degree: 0%

---

# [!DNL Adobe Commerce B2B] リリースノート

B2BAdobeのこれらのリリースノートでは、拡張機能がリリースサイクル中に追加した追加と修正をキャプチャしています。以下に例を示します。

![新規](../assets/new.svg) 新機能
![修正された問題](../assets/fix.svg) 修正点および改善点
![既知の問題](../assets/bug.svg) 既知の問題

>[!NOTE]
>
>参照： [製品の可用性](https://experienceleague.adobe.com/docs/commerce-operations/release/product-availability.html) 使用可能なAdobe Commerce リリースでサポートされている B2B Commerce拡張機能のバージョンについて詳しくは、こちらを参照してください。

## B2B 1.5.0 – ベータ版

{{$include /help/_includes/b2b-beta-note.md}}

*2023 年 11 月 13 日（Pt）*

[!BADGE サポート]{type=Informative tooltip="サポート"}

B2B v1.5.0 ベータ版リリースには、新機能、品質の向上、バグ修正が含まれています。

![新規](../assets/new.svg) 見積機能の改善により、バイヤーとセラーは見積もりと見積ネゴシエーションをより効果的に管理できます。

- **見積もりを下書きとして保存**<!--B2B-2566--> – を作成する場合 [見積もり依頼](quote-request.md) 買い物かごから、バイヤーは次を選択して、見積をドラフトとして保存できるようになりました。 **[!UICONTROL Save as Draft]** 日 [!UICONTROL Request a Quote] フォーム。

  下書きの見積もりに有効期限がありません。 購入者は、次の場所で下書きの見積もりを確認および更新できます [!UICONTROL My Quotes] アカウントダッシュボードの「」セクション。

- **引用符名の変更**<!--B2B-2596--> – バイヤーは、 [見積もりの詳細](account-dashboard-my-quotes.md#quote-actions) 「」を選択してページに反映 **[!UICONTROL Rename]** オプション。 このオプションは、権限を持つ購入者が見積もりを編集する際に使用できます。 名前の変更イベントは Quote History Log に記録されます。

- **見積もりを複製**<!--B2B-2701--> – 買い手と売り手は、既存の見積もりをコピーして新しい見積もりを作成できるようになりました。 Quote の詳細表示から次のオプションを選択してコピーを作成  **[!UICONTROL Create Copy]** 日 [見積もりの詳細表示](quote-price-negotiation.md#button-bar) 管理者または [ストアフロント](account-dashboard-my-quotes.md#quote-actions).

- **品目割引ロック**<!--B2B-2597--> – 見積ネゴシエーション中に、セラーは明細品目値引ロックを使用して、値引を適用する際の柔軟性を高めることができます。 例えば、販売者は、品目に特別品目割引を適用し、品目をロックして、それ以上の割引を防ぐことができます。 品目がロックされている場合、見積レベルの値引が適用される際に品目価格を更新することはできません。 参照： [購買担当の見積を開始します](sales-rep-initiates-quote.md).

![新規&#x200B;](../assets/new.svg)**会社管理**<!--B2B-2901--> – マーチャントは、指定された親会社に企業を割り当てることで、Adobe Commerceの企業を階層的な組織として表示および管理できるようになりました。 会社を親に割り当てると、親の会社管理者が会社アカウントを管理できるようになります。 許可された管理者ユーザーのみが、会社の割り当てを追加および管理できます。 詳しくは、を参照してください [会社階層の管理](assign-companies.md).

- 会社ページに、新しい **[!UICONTROL Company Type]** フィールドは、親および子会社を識別します。 マーチャントは、会社タイプ別に会社ビューをフィルタリングしたり、行項目または一括アクションを使用して会社を管理したりできます。

- マーチャントは、新しいから会社の割り当てを追加および管理できます **[!UICONTROL Company Hierarchy]** に関する節 [!UICONTROL Company Account] ページ。

- API 開発者は、新しい会社関係 REST API エンドポイントを使用できます `/V1/company/{parentId}/relations` 会社の割り当てを作成、表示、削除するには 参照： [会社オブジェクトの管理](https://developer.adobe.com/commerce/webapi/rest/b2b/company-object/) が含まれる *Web API 開発者ガイド*.

![修正された問題](../assets/fix.svg)<!--ACP2E-1984-->をクリックするマーチャント **[!UICONTROL Print]** 管理者の Quote 詳細ビューのボタンで、Quote をPDFとして保存するように求められるようになりました。 以前は、マーチャントは見積りの詳細を含むページにリダイレクトされていました。

![修正された問題](../assets/fix.svg) <!--ACP2E-1742-->以前は、パーセンテージが 0 で数量が変更された顧客の見積を送信すると、管理者は例外をスローしましたが、数量は保存されていました。 この修正を適用した後、以下を行います `0 percentage` メッセージを含む適切な例外がスローされます。

![修正された問題](../assets/fix.svg) <!--ACP2E-1742-->見積ネゴシエーション中に、セラーは次の項目を指定できるようになりました `0%` 見積の交渉による見積の値引フィールドに値引を入力し、見積を購買担当に送付します。 以前は、売り手が 0% の割引を入力し、見積もりを買い手に送り返した場合、管理者は以下を返しました `Exception occurred during quote sending` エラーメッセージ。

![修正された問題](../assets/fix.svg) <!--ACP2E-2097-->ReCaptcha V3 がストアフロントのチェックアウト用に設定されている場合、B2B 見積のチェックアウトプロセス中に ReCaptcha 検証が正しく機能するようになりました。 以前は、検証は次のエラーで失敗していました： `recaptcha validation failed, please try again` エラーメッセージ。

![修正された問題](../assets/fix.svg) <!--ACP2E-1825-->会社がブロックされると、会社に関連付けられているユーザーは発注書を送信できなくなります。 以前は、会社がブロックされている場合、会社に関連付けられているユーザーが発注書を送信することができました。

![修正された問題](../assets/fix.svg)<!--ACP2E-1933-->会社管理者は、ストアフロントから会社ユーザーを追加できるようになりました。 以前は、管理者ユーザーが新しいユーザーを追加しようとすると、Commerceがエラーをログに記録していました。 `CRITICAL: Error: Call to a member function __toArray() on null in app/code/Magento/LoginAsCustomerLogging/Observer/LogSaveCustomerObserver.php:123`.

## B2B v1.4.2-p1

[!BADGE サポート]{type=Informative tooltip="サポート"}

![新規](../assets/new.svg) Adobe Commerce 2.4.7-p1+および 2.4.6-p6+ セキュリティパッチリリースとの互換性が追加されました。


## B2B v1.4.2

*2023 年 10 月 10 日（Pt）*

[!BADGE サポート]{type=Informative tooltip="サポート"}

B2B v1.4.2 リリースには、品質の改善とバグ修正が含まれています

![修正された問題](../assets/fix.svg) <!--B2B-2897-->販売者が、その購買者会社に関連付けられた共有カタログで使用できない製品 SKU を含む購買者見積を作成すると、エラー・メッセージが表示されます `The SKU you entered is not available in the shared catalog. Please check the SKU and try again`.  販売者は、利用できない製品を削除するまで見積もりを保存できません。 以前は、使用できない SKU を含んだ見積もりが保存され、ストアフロントに見積もりが読み込まれませんでした。

## B2B v1.4.1

*2023 年 8 月 7 日（Pt）*

[!BADGE サポート]{type=Informative tooltip="サポート"}[Adobe Commerce 2.4.6-p2](https://experienceleague.adobe.com/docs/commerce-operations/release/notes/security-patches/2-4-6-p1.html). Adobe Commerce 2.4.7-beta1 と互換性あり。

B2B v1.4.1 リリースには、品質の改善とバグ修正が含まれています。

![修正された問題](../assets/fix.svg) <!--ACP2E-1825-->会社がブロックされると、会社に関連付けられているユーザーは発注書を送信できなくなります。 以前は、会社がブロックされている場合、会社に関連付けられているユーザーが発注書を送信することができました。

![修正された問題](../assets/fix.svg) <!--ACP2E-1943-->商品のバックオーダー状態がストアフロントに正しく表示されるようになりました。 以前は、出荷可能な製品が誤ってバックオーダーと識別されていました。

![修正された問題](../assets/fix.svg) <!--ACP2E-1862-->会社登録フォームに顧客ファイルタイプ属性が含まれている場合、登録プロセス中にアップロードされたファイルは、会社を作成した後、会社管理者のアカウント情報に含まれるようになりました。 以前は、添付ファイルが見つかりませんでした。

![修正された問題](../assets/fix.svg) <!--ACP2E-1793-->構成可能な製品のスウォッチセレクターが、購買依頼リスト品目構成ページで期待どおりに表示されるようになりました。 以前は、スウォッチセレクターは購買依頼リスト項目設定ページのドロップダウンフィールドとして表示されていました。

![修正された問題](../assets/fix.svg) <!--ACP2E-1968-->使用する場合 [会社のGraphQLクエリ](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/company/queries/company/#return-the-company-structure) 会社の詳細を返すために、結果がエラーなく正常に返されるようになりました。

## B2B v1.4.0

*2023 年 6 月 13 日（Pt）*

[!BADGE サポート]{type=Informative tooltip="サポート"}[Adobe Commerce 2.4.6-p1](https://experienceleague.adobe.com/docs/commerce-operations/release/notes/security-patches/2-4-6-p1.html). Adobe Commerce 2.4.7-beta1 との互換性

このリリースには、B2B の交渉可能な引用符と複数のバグ修正に関する新機能と機能強化が含まれています。

![新規](../assets/new.svg) Adobe Commerce 2.4.7-beta1 との互換性が追加されました。

![新規](../assets/new.svg) **販売者が見積を開始しました** – セラーは、管理の Quote グリッドおよび Customer グリッドから直接、購入者に対する Quote を開始できるようになりました。 この機能により、見積もりプロセスが合理化され、お客様の複雑さが軽減されます。 顧客が注文を開始していない場合、販売者は顧客に代わってすばやく見積もりを作成し、交渉プロセスを開始できます。 以前は、見積もりは、購入者、または顧客としてログインした販売者のみがストアフロントから作成できました。

![新規](../assets/new.svg) **品目割引およびネゴシエーション**—<!--B2B-2440--> 見積内で、B2B のバイヤーとセラーは、契約が成立するまで割引を適用したりメモを交換したりして、明細品目レベルで交渉できるようになりました。 メモの作成と更新は、明細品目と見積履歴に含まれ、通信を追跡します。 以前は、購入者と販売者は、メモを交換したり、見積もりレベルで割引を適用したりすることしかできませんでした。

![修正された問題](../assets/fix.svg) 「発注」オプションが有効化されており、PayPal 支払いオプションで作成された仮想見積もりが選択されている場合、Adobe Commerceは支払い中に正しい詳細を表示するようになりました。 以前は、これらの条件の下で合計はゼロとして表示されていました。

![修正された問題](../assets/fix.svg) <!--ACP2E-1504--> 与信限度額が 999 を超える会社を保存しようとすると、検証エラーが発生しなくなりました。 以前は、会社のクレジット制限が 999 を超える場合、Adobeコマースにコンマ区切り記号が挿入され、検証エラーが発生して更新を保存できませんでした。

![修正された問題](../assets/fix.svg) <!--ACP2E-1474-->  選択した配送先住所は、譲渡可能な見積もりで注文を行っても変更されません。 以前は、注文すると、選択した配送先住所がデフォルトの配送先住所に変更されていました。

![修正された問題](../assets/fix.svg) <!--ACP2E-1429--> B2B 機能のストア設定で、 **[!UICONTROL Enable Shared Catalog direct products price assigning]** フィールドは自動的に無効になりました。 ストアフロントでは、 **[!UICONTROL Enable Company]** またはの設定 **[!UICONTROL Enable Shared Catalog]** はに設定されています。 **[!UICONTROL No]**.

![修正された問題](../assets/fix.svg) <!--ACP2E-1683--> ストアフロントから会社アカウントを作成する際に、Commerceは、会社登録を処理する前にメールアドレスを検証するようになりました。 メールアドレスが無効な場合、操作は失敗し、アカウントの更新は処理されません。 以前は、メールアドレスが無効なために会社アカウントの作成要求が失敗した場合でも、顧客アカウントが作成されていました。

![修正された問題](../assets/fix.svg) <!--ACP2E-1664--> 共有カタログと価格構造に二重引用符を含む製品 SKU で、管理者でエラーが発生しなくなりました。

![修正された問題](../assets/fix.svg) <!--ACP2E-1498--> Commerce アプリケーションの Varnish 設定を更新して、ゲストユーザーが他のお客様グループからのデータを表示できないようにしました。

### 既知の問題

で B2B 1.4.0 をインストールまたはアップグレードする場合 [Adobe Commerce バージョン 2.4.6-p1](https://experienceleague.adobe.com/docs/commerce-operations/release/notes/security-patches/2-4-6-p1.html)の場合、次のエラーが発生します。

```terminal
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - Root composer.json requires magento/extension-b2b 1.4.0 -> satisfiable by magento/extension-b2b[1.4.0].
    - magento/extension-b2b 1.4.0 requires magento/security-package-b2b 1.0.4-beta1 -> found magento/security-package-b2b[1.0.4-beta1] but it does not match your minimum-stability.

Installation failed, reverting ./composer.json and ./composer.lock to their original content.
```

この問題を修正するには、 [安定性タグ](https://getcomposer.org/doc/04-schema.md#package-links). 手順については、を参照してください [Adobe Commerce ナレッジベース](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/troubleshooting/installation-and-upgrade/b2b-1.4.0-installation-fails-on-adobe-commerce-2.4.6-p1-on-premises.html).

## B2B v1.3.5

*2023 年 3 月 14 日（Pt）*

[!BADGE サポート]{type=Informative tooltip="サポート"}

![新規](../assets/new.svg) Adobe Commerce 2.4.6-p2 との互換性をサポートするために、B2B バージョン 1.3.5-p2 をリリースしました。

![新規](../assets/new.svg) Adobe Commerce 2.4.6-p1 との互換性をサポートするために、B2B バージョン 1.3.5-p1 をリリースしました。

>[!NOTE]
>
>Commerceを 2.4.6 からにアップグレードした後 [最新リリース](https://experienceleague.adobe.com/docs/commerce-operations/release/versions.html#2.4.6)をサポートされている B2B 1.3.5 パッチリリースに更新してください。 または、B2B 拡張機能をバージョン 1.3.5 からバージョン 1.4.0 以降にアップグレードして、最新機能を取得します。

![新規](../assets/new.svg) Adobe Commerce 2.4.6 がサポートされるようになりました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-689--> 「発注」オプションが有効化されており、PayPal 支払いオプションで作成された仮想見積もりが選択されている場合、Adobe Commerceは支払い中に正しい詳細を表示するようになりました。 以前は、これらの条件の下で合計はゼロとして表示されていました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-609--> の顧客グループのリスト **閲覧を許可カテゴリ** 設定に共有カタログに関連する顧客グループが含まれなくなりました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-1244--> 税金/VAT 番号の顧客属性が、管理者とストアフロントの両方の会社管理者アカウントで期待どおりに機能するようになりました。 会社アカウントを作成する際に、カスタムの税金/VAT 属性は不要になりました。 以前は、マーチャントがカスタムの税金/VAT 属性を持つ会社アカウントを作成すると、Adobe Commerceがストアフロントと管理者の両方で検証エラーをスローしていました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-1236--> 特定の範囲で共有カタログ機能を無効にすると正しく機能するようになりました。 以前は、マーチャントが共有カタログ設定を保存すると、Adobe Commerceが無効なスコープを設定していました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-1203--> 管理者ユーザーは、会社ユーザーの顧客カスタム属性値を保存できるようになりました。 以前は、会社ユーザーの顧客カスタム属性を保存できませんでした。

![修正された問題](../assets/fix.svg) <!--- ACP2E-1221--> 多数の会社の権限が既に割り当てられている場合、パフォーマンスの問題は、GraphQLを通じて提供される会社の権限の検証で解決されます。

![修正された問題](../assets/fix.svg) <!--- ACP2E-1242--> クイックオーダーを使用して利用可能な在庫を超える量の商品を追加した場合に、Adobe Commerceが買い物かごページでエラーをスローしなくなりました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-1090--> パフォーマンス `SELECT` 会社の権限操作が改善されました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-2456--> カテゴリクエリで問い合わせるカテゴリに対して明示的に設定されたカテゴリ権限がない場合、ストア設定に従って製品価格が返されるようになりました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-6829--> この **[!UICONTROL Place Order]** 承認済みの見積もりリクエストを使用して購入を完了する際に、ボタンが期待どおりに機能するようになりました。 交渉可能な見積もりの問題 `negotiableQuoteCheckoutSessionPlugin` プラグインが解決されました。

## B2B v1.3.4

*2022 年 8 月 9 日（Pt）*

[!BADGE サポート]{type=Informative tooltip="サポート"}

![新規](../assets/new.svg) Adobe Commerce 2.4.5 がサポートされるようになりました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-453-->Adobe Commerceでは、既存の会社が API 呼び出しで更新されるたびにメール通知が送信されなくなりました。 会社を作成した場合にのみメールが送信されるようになりました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-406-->Adobe Commerceは、 **[!UICONTROL Enable Cross Border Trade]** 税金計算の設定が有効になっています。

![修正された問題](../assets/fix.svg) <!--- ACP2E-322-->次のタイミングで在庫が更新された後、設定可能な製品が製品リストの最後の位置に移動されるようになりました **[!UICONTROL Move out of stock to the bottom]** 設定は有効になっています。 新しいカスタムデータベースクエリが実装され、Elasticsearchインデックスの並べ替え順が管理者向けの並べ替え順に従うようになりました。 以前は、この設定が有効な場合、設定可能な製品とその子製品は、リストの下部に移動されませんでした。

![修正された問題](../assets/fix.svg) <!--- ACP2E-308-->発注書のメールが、マルチサイトデプロイメントの各 web サイトのメール送信設定に従うようになりました。 の小切手 **[!UICONTROL Disable Email Communications]** メールキューのカスタムロジックに設定が追加されました。 以前は、Adobe Commerceは、セカンダリ web サイトのメール送信設定を受け入れませんでした。

![修正された問題](../assets/fix.svg) <!--- ACP2E-302-->クイックオーダーページの SKU フィールドのタイトルが、わかりやすくするために変更されました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-543-->買い物客がで無効な SKU を入力した場合に、Adobe Commerceにより詳細なエラーメッセージが表示されるようになりました **SKU または製品名を入力** フィールド。

![修正された問題](../assets/fix.svg) <!--- ACP2E-1753-->この **[!UICONTROL Account Created in]** 会社管理者のフィールドで、会社を保存した後も期待どおりの値が保持されるようになりました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-722 -->この `customer` 次の条件でフィルタ処理された購買依頼リストを取得しても、問合せで空の結果が戻されなくなりました。 `uid`.

![修正された問題](../assets/fix.svg) <!--- ACP2E-210 -->の前にプラグインを追加しました `collectQuoteTotals` を呼び出して、ストアクレジットが 1 回だけ適用されるようにします。

![修正された問題](../assets/fix.svg) <!--- ACP2E-665 -->ユーザーのアカウントが管理者によって管理者から削除されると、そのユーザーはログインページにリダイレクトされるようになりました。 以前は、Adobe Commerceがエラーをスローしていました。 プラグイン （`SessionPlugin`） コードブロックは、 `try…catch` ブロック。 以前は、このコードは、汎用の例外処理ブロック内にラップされていませんでした。

![修正された問題](../assets/fix.svg) <!--- ACP2E-661 --> モバイルモードのクイックオーダーページで、を押します **Enter** 有効な製品名または SKU を入力した後、買い物客は期待どおりに次のフィールドに移動するようになりました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-607 -->会社名が、チェックアウトワークフローの請求セクションと配送先住所セクションで期待どおりに表示されるようになりました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-375 -->次の場合にストアクレジットを使用できなくなりました **[!UICONTROL Zero Subtotal Checkout]** 支払い方法が無効になっています。 以前は、管理者からの発注時に「クレジットを保存」チェックボックスが機能していませんでした。 店舗クレジットを含む注文が行われず、次のエラーが表示されました： `The requested Payment Method is not available`.

## B2B v1.3.3

*2022 年 8 月 9 日（Pt）*

[!BADGE サポート]{type=Informative tooltip="サポート"}

![新規](../assets/new.svg) Adobe Commerce 2.4.4 がサポートされるようになりました。

![修正された問題](../assets/fix.svg) <!--- MC-41985--> 10 万を超える会社の役割を含むデプロイメントでAdobe Commerce 2.3.x からAdobe Commerce 2.4.x にアップグレードするのに必要な時間が大幅に短縮されました。

![修正された問題](../assets/fix.svg) <!--- MC-42153--> POST `V1/order/:orderId/invoice` リクエストで、 **[!UICONTROL Payment on Account]** 支払方法が有効になっています。 以前は、Adobe Commerceは次のエラーをスローしていました。 `An invoice for partial quantities cannot be issued for this order. To continue, change the specified quantity to the full quantity`. [GitHub-32428](https://github.com/magento/magento2/issues/32428)

![修正された問題](../assets/fix.svg) <!--- MC-41975--> PayPal Payflow Pro は、顧客の買い物かごに他の製品が含まれている場合、B2B の交渉可能な見積もりで期待どおりに機能するようになりました。 Adobe Commerceが注文を正常に処理し、期待どおりにメールを顧客に送信するようになりました。 以前は、Adobe Commerceが致命的なエラーをスローし、値が 0 の確認メールをお客様に送信していました。

![修正された問題](../assets/fix.svg) <!--- MC-41819--> 共有カタログから一部の製品を除外した後、カタログ検索結果ページにページネーションが正しく表示されるようになりました。

![修正された問題](../assets/fix.svg) <!--- MC-42886--> 管理者で会社ユーザーを作成または保存する際に、顧客のカスタム属性が期待どおりに保存されるようになりました。

![修正された問題](../assets/fix.svg) <!--- MC-42927--> この **[!UICONTROL Submit]** 1 回のクリックで複数のフォームを送信できない新会社を作成フォームのボタンが無効になりました。 以前は、このボタンを繰り返しクリックすると、このフォームを複数回送信してエラーが発生する可能性がありました。

![修正された問題](../assets/fix.svg) <!--- MC-42787--> Adobe Commerceでは、買い物客が並べ替えが無効になっているストアにログインした際に、ストアフロントに並べ替えリンクを表示しなくなりました。

![修正された問題](../assets/fix.svg) <!--- MC-43115--> 共有カタログが有効な場合、SKU によるクイックオーダー検索で大文字と小文字が区別されなくなりました。

![修正された問題](../assets/fix.svg) <!--- MC-42203--> 会社を作成する際に、顧客属性のファイルを更新できるようになりました。 以前は、タイプが添付ファイルに会社を作成しようとしたとき `File`、Adobe Commerceは会社を作成せず、このエラーを例外ログに記録しました `Something went wrong while saving file`.

![修正された問題](../assets/fix.svg) <!--- MC-42242--> これで、というカスタム属性を持つ顧客アカウントの会社を作成できるようになりました`File`）または（`Image`）と入力します。 以前は、アカウントにこれらのカスタマイズ可能なオプションのいずれかが含まれている場合、会社編集ページローダーが解決されず、会社の詳細を編集できませんでした。

![修正された問題](../assets/fix.svg) <!--- MC-42268--> この `products` クエリが正確なを返すようになりました `total_count` 共有カタログが有効な場合のフィールド。

![修正された問題](../assets/fix.svg) <!--- MC-42203-->  会社を作成する際に、顧客属性のファイルを更新できるようになりました。 以前は、タイプが添付ファイルに会社を作成しようとしたとき `File`、Adobe Commerceは会社を作成せず、このエラーを例外ログに記録しました `Something went wrong while saving file`.

![修正された問題](../assets/fix.svg) <!--- MC-43178--> この _会社設定_ および _会社を作成_ オンラインでの配送方法を無効にした後、ページが期待どおりに機能するようになりました。 検証が追加され、無効になった出荷モジュールの処理が試行できなくなりました。 以前は、Adobe Commerceには次のエラーが表示されていました。 `Type Error occurred when creating object: Magento\CompanyShipping\Model\Source\ShippingMethod, Too few arguments to function Magento\CompanyShipping\Model\Source\ShippingMethod::__construct(), 1 passed in /var/www/html/elmtup/vendor/magento/framework/ObjectManager/Factory/AbstractFactory.php on line 121 and exactly 2 expected`.

![修正された問題](../assets/fix.svg) <!--- MC-42214--> この _カテゴリ_ 部分的なインデックス作成中に権限が生成されている間、ページに一貫した製品データが表示されるようになりました。 ディレクトリ権限の新しい部分インデクサーがこのプロセスに追加されました。 以前は、インデクサーの実行中に表示されるデータが正しくありませんでした。

![修正された問題](../assets/fix.svg) <!--- MC-42567--> この `categoryList` カタログの権限が使用され、製品が共有カタログに割り当てられている場合、クエリが正しい製品数を返すようになりました。

![修正された問題](../assets/fix.svg) <!--- MC-42528--> この `categoryList` クエリはカテゴリの権限に従い、許可されたカテゴリのみを返すようになりました。 以前は、割り当て済みカテゴリと未割り当てのカテゴリをすべて返していました。

![修正された問題](../assets/fix.svg) <!--- MC-42399--> この `rest/V1/company/{id}` リクエストでを返すようになりました `is_purchase_order_enabled` 属性値は期待通りです。

![修正された問題](../assets/fix.svg) <!--- ACP2E-128--> カスタムの顧客属性が、で期待どおりに表示されるようになりました _会社管理者_ タブ。

![修正された問題](../assets/fix.svg) <!--- ACP2E-130--> マイアカウントページのウィッシュリスト ブロックが、会社管理者および会社ユーザーに対して期待どおりに表示されるようになりました。

![修正された問題](../assets/fix.svg) <!--- ACP2E-133--> クイックオーダーエラーが買い物かごに表示されなくなりました。 以前は、Adobe Commerceでは、カタログに SKU が見つからなかった場合、買い物かごにこのエラーを表示していました。  `The SKU was not found in the catalog`.

![修正された問題](../assets/fix.svg) <!--- ACP2E-194--> 共有カタログの保存操作が最適化され、より高速に実行できるようになりました。 これまで、共有カタログを多数の顧客グループと共に保存するには、数分かかる場合がありました。

![修正された問題](../assets/fix.svg) <!--- MC-42240--> Adobe Commerceは、すべてのサブカテゴリ権限を `sharedcatalog_category_permissions` 親カテゴリが削除された際のテーブル。 以前は、親カテゴリデータのみが削除されていました。

## B2B v1.3.2

*2022 年 8 月 29 日（Pt）*

[!BADGE サポート]{type=Informative tooltip="サポート"}

![新規](../assets/new.svg) Adobe Commerce 2.4.3 がサポートされるようになりました。

![修正された問題](../assets/fix.svg) <!--- MC-39862--> Adobe Commerceから、期限切れの譲渡可能見積に関する更新メールが正常に送信されるようになりました。 以前は、交渉可能な見積もりの有効期限が切れた場合、Adobe Commerceは更新メールを送信しませんでした。

![修正された問題](../assets/fix.svg) <!--- MC-40682--> Adobe Commerceは、次の場合、まもなく期限切れになる更新メールと、期限切れの交渉可能な見積を正常に送信するようになりました `cron` ジョブがありません。

### 会社

![修正された問題](../assets/fix.svg) <!--- MC-41542--> 新しい会社アカウントページの国を作成ドロップダウンフィールドに空のオプション値が表示されなくなりました。 以前は、最初の 2 つのオプション値と国コード `AN` が空でした。

![修正された問題](../assets/fix.svg) <!--- MC-41260--> 「」をクリック **[!UICONTROL Return]** 会社のユーザーが作成した注文のボタンで、管理者ユーザーが期待どおりに返品の作成ページにリダイレクトされるようになりました。 以前は、管理者は注文履歴ページにリダイレクトされていました。

![修正された問題](../assets/fix.svg) <!--- MC-40798--> を実行する際に、Adobe Commerceがメモリ不足エラーで失敗しなくなりました `app/code/Magento/PurchaseOrder/Setup/Patch/Data/InitPermissions.php::apply` メソッド期間 `bin/magento setup:upgrade`. 以前は、Adobe Commerceは、権限の初期化時にバッチサイズをコレクションに使用せず、代わりにすべての会社の役割のコレクションを読み込んでいました。

![修正された問題](../assets/fix.svg) <!--- MC-40551--> 会社ユーザーは、顧客のカスタム属性値を編集および更新できるようになりました。 以前は、これらの属性は、ユーザーの作成および編集フォームに正しくバインドされていませんでした。 会社ユーザーは異なる属性値を入力できましたが、Adobe Commerceはこれらの値を正しく保存しませんでした。

![修正された問題](../assets/fix.svg) <!--- MC-32653--> 会社の役割の権限のリソースツリーを、期待どおりに翻訳できるようになりました。 以前は、有効な翻訳ファイルが存在しても、権限ツリーは翻訳されませんでした。

![修正された問題](../assets/fix.svg) <!--- MC-40358--> Adobe Commerceで、B2B ユーザーのカスタム顧客属性値が期待どおりに保存されるようになりました。 以前は、カスタムの顧客属性を含む会社アカウントを作成するとテンプレートエラーがトリガーされ、Adobe Commerceがフォームを正常に読み込めませんでした。 引数のレイアウトへの追加 `company_create_account` この問題を解決しました。

![修正された問題](../assets/fix.svg) <!--- MC-41721--> 会社のユーザーフィルター（すべてのユーザーを表示、アクティブユーザーを表示、非アクティブユーザーを表示など）が期待どおりに動作するようになりました。 以前は、会社のユーザーページに対するフィルタリングアクションによって JavaScript エラーが発生していました。

### 会社クレジット

![修正された問題](../assets/fix.svg) <!--- MC-41551--> Web サイトレベルの権限のみを含む制限付きアカウントを持つ管理者は、Web サイトとは異なる通貨を使用する会社を作成できるようになりました。

![修正された問題](../assets/fix.svg) <!--- MC-41523--> Adobe Commerceは、正しいから会社のメールを送信するようになりました `from` メールアドレスとスコープ。 以前は、Adobe Commerceは、会社のクレジット割り当てや更新メールを送信する際に、web サイトの範囲を考慮していませんでした。

### クイック注文

![修正された問題](../assets/fix.svg) <!--- MC-42104--> CSV ファイルからのクイックオーダーを使用した注文の作成が、存在しない SKU で期待どおりに動作するようになりました。

![修正された問題](../assets/fix.svg) <!--- MC-40268--> クイックオーダーを使用した複数の SKU での検索が期待どおりに動作するようになりました。 以前は、結果に重複エントリが含まれていました。

![修正された問題](../assets/fix.svg) <!--- MC-40261--> 追加製品のリスト表示では、クイックオーダー中に SKU を使用して複数の製品を選択した場合に、入力された SKU を小文字と大文字で同じように処理するようになりました。

![修正された問題](../assets/fix.svg) <!--- MC-40225--> クイックオーダーを使用すると、買い物客が指定した数量の製品が追加されるようになりました。 以前は、Adobe Commerceは、買い物客が指定した数量が 1 を超える場合でも、1 つの商品のみを追加していました。

![修正された問題](../assets/fix.svg) <!--- MC-41283--> クイックオーダーのオートコンプリート機能が、一部の SKU で機能するようになりました。

![修正された問題](../assets/fix.svg) <!--- MC-41299--> Adobe Commerceに、次のように設定された製品が表示されるようになりました **個別に表示されない** クイック注文ページの自動提案リストと検索結果で上書きできます。

![修正された問題](../assets/fix.svg) <!--- MC-42402--> 買い物客は、クイックオーダーフォームを使用して、大文字を含む SKU 別に複数の製品を追加できるようになりました。 以前は、最初の製品のみが追加されていました。

### 譲渡可能見積

![修正された問題](../assets/fix.svg) <!--- MC-41232--> 買い物客は、「URL」フィールドにネゴシエート可能な引用符へのリンクを貼り付けて正常にログインした後、ネゴシエート可能な引用符ページにリダイレクトされるようになりました。 以前は、買い物客はマイアカウントページにリダイレクトされていました。

![修正された問題](../assets/fix.svg) <!--- MC-39317--> チェックアウト時に作成された顧客アカウント用の日付カスタマイズ可能オプションを含む製品を含む注文で、並べ替えが期待どおりに機能するようになりました。 以前は、Adobe Commerceは並べ替えを処理せず、次のエラーが表示されていました。 `The product has required options. Enter the options and try again`.

![修正された問題](../assets/fix.svg) <!--- MC-39063--> 発注書モジュールが無効になっている場合、交渉可能な見積もりの配送先住所はチェックアウト中に編集できなくなります。 この動作は、の以前の修正に起因します。 `isQuoteAddressLocked` は、交渉可能な見積もりチェックアウト レンダラーから削除されました。

![修正された問題](../assets/fix.svg) <!--- MC-38967--> マーチャントは、管理者から交渉可能な見積もりに製品を追加できるようになりました。

### 発注書

![修正された問題](../assets/fix.svg) <!--- MC-39983--> 次の場合に、PayPal Express チェックアウトを使用して注文を行うと、Adobe Commerceに期待どおりに情報エラーメッセージが表示されるようになりました。 **[!UICONTROL Name Prefix]** 属性の設定 `required`. 以前は、Adobe Commerceによる注文やエラーメッセージの表示はありませんでした。

![修正された問題](../assets/fix.svg) <!--- MC-39620--> Google タグマネージャーが有効な場合、発注書モジュールの請求先住所の UI コンポーネントで見積先住所が正しく使用されるようになりました。 以前は、支払いページで JavaScript エラーが発生していました。

### 購買依頼リスト

![修正された問題](../assets/fix.svg) <!--- MC-40426--> マーチャントはPOSTを使用できるようになりました `rest/all/V1/requisition_lists` 顧客の購買依頼リストを作成するエンドポイント。 以前は、Adobe Commerceが購買依頼リストを作成しようとした際に、次の 400 エラーがスローされていました。 `Could not save Requisition List`.

![修正された問題](../assets/fix.svg) <!--- MC-41123--> この **[!UICONTROL Add to Requisition List]** 買い物かごに在庫切れの商品も含まれている場合、買い物かごの在庫切れの商品に対してボタンが表示されるようになりました。 以前は、1 つの買い物かごに 2 つの製品が含まれ、そのうち 1 つが在庫切れの場合、 _[!UICONTROL Add to Requisition List]_どちらの製品でもボタンが表示されなかった。

![修正された問題](../assets/fix.svg) <!--- MC-40877--> REST API を使用して、製品を購買依頼リストに追加できるようになりました。

![修正された問題](../assets/fix.svg) <!--- MC-40155--> 要求リスト **[!UICONTROL Latest Activity Date]** 値はロケール形式に準拠するようになりました。

![修正された問題](../assets/fix.svg) <!--- MC-39580--> 購買依頼リストからバンドル商品を編集する際に、Adobe Commerceで致命的なエラーがスローされなくなりました。

![修正された問題](../assets/fix.svg) <!--- MC-40454--> カスタマイズ可能なオプションを使用して商品を追加した場合、Adobe Commerceに正しい商品価格が表示されるようになりました `(File)` 購買依頼リストからウィッシュ・リストに移動します。 アップロードしたファイルへのリンクも、期待どおりに表示されます。 以前は、Adobe Commerceで誤った製品価格が表示され、ファイルへのリンクが表示されていませんでした。

![修正された問題](../assets/fix.svg) <!--- MC-36383--> カスタマイズ可能なオプションを備えた製品 `(File)` は、購買依頼リストから買い物かごに追加できるようになりました。

### 共有カタログ

![修正された問題](../assets/fix.svg) <!--- MC-40497--> 特定の web サイトに限定された役割を持つ管理者が、共有カタログの作成、表示、編集ができるようになりました。 以前は、限られたロールを持つ管理者が共有カタログを作成しようとすると、Adobe Commerceが致命的なエラーをスローしていました。

![修正された問題](../assets/fix.svg) <!--- MC-41337--> レイヤナビゲーションの結果に、フィルタリングされた属性を持つ製品の正確な数が含まれるようになり、買い物客は複数のフィルターを適用できるようになりました。 以前は、1 つのフィルターのみを適用できましたが、Adobe Commerceのレイヤーナビゲーションで、不正確な製品数が表示されていました。

![修正された問題](../assets/fix.svg) <!--- MC-40779--> Adobe Commerceの検索結果に、レイヤー化されたナビゲーションフィルターで製品数が正しく表示されるようになりました。 以前は、検索結果ページのプラグインはElasticsearchを使用していませんでしたが、データベースに新しいクエリを発行しました。

![修正された問題](../assets/fix.svg) <!--- MC-39978--> マーチャントがデフォルトの共有カタログからすべての商品を削除した場合に、Adobe Commerceで階層価格が削除されなくなりました。

![修正された問題](../assets/fix.svg) <!--- MC-39802--> フィルターは現在のカテゴリでフィルタリングされ、共有カタログが有効な場合はすべてのページに正しく表示されるようになりました。 以前は、フィルターは現在のページに対してのみ誤って計算され、現在のカテゴリではフィルタリングされていませんでした。

![修正された問題](../assets/fix.svg) <!--- MC-39522--> GraphQL `products` クエリは、共有カタログが有効な場合に、共有カタログに割り当てられていない製品の価格範囲とカテゴリを返さなくなりました。 以前は、製品自体がに返されなかった場合でも、クエリは製品の集計を返していました `items` 配列。

## B2B v1.3.1

*2021 年 2 月 9 日（Pt）*

[!BADGE サポート]{type=Informative tooltip="サポート"}

![新規](../assets/new.svg) Adobe Commerce 2.4.2 がサポートされるようになりました。

![新規](../assets/new.svg) 発注書でオンライン支払い方法がサポートされるようになりました。

![修正された問題](../assets/fix.svg) 以前の注文でこの製品を使用した際に、設定可能な製品を購入リストから直接買い物かごに追加しても、システムエラーが返されなくなりました。

![修正された問題](../assets/fix.svg) 分割データベース設定がデプロイされている場合、Adobe Commerceに、発注書の「承認が必要」タブが正しく表示されるようになりました。

![修正された問題](../assets/fix.svg) Adobe Commerceでは、発注書を表示する際に、バンドル商品とギフトカードに関する詳細が表示されるようになりました。

![修正された問題](../assets/fix.svg) 買い物客は、次の場所でストアを参照しながらアカウントにログインした後、期待どおりにリダイレクトされるようになりました **[!UICONTROL Website Restriction]** が有効になっており、 **[!UICONTROL Restriction Mode]** はに設定されています。 `Private Sales: Login Only`. 以前は、買い物客はストアのホームページにリダイレクトされていました。 <!--- MC-38934-->

![修正された問題](../assets/fix.svg) 多数の顧客（13000 を超える）を含む B2B の会社階層を使用したデプロイメントで、会社管理者のアカウントダッシュボードページに、注文履歴が期待どおりに読み込まれるようになりました。 以前は、注文履歴の読み込みに時間がかかったり、まったく時間がかからなかったりして、Adobe Commerceに 503 エラーが表示されていました。 <!--- MC-38830-->

![修正された問題](../assets/fix.svg) 「カテゴリ」ページから「購買依頼リスト」に、カスタマイズ可能なオプションを持つ未構成の製品を追加した場合に、Adobe Commerceで複数の同一の警告メッセージが表示されなくなりました。 <!--- MC-38342-->

![修正された問題](../assets/fix.svg) B2B の共有カタログが有効な場合、新しい製品と重複した製品がカテゴリページで期待どおりに表示されるようになりました。 <!--- MC-38307-->

![修正された問題](../assets/fix.svg) Adobe Commerceが正しい情報を保持 `store_id` これは、会社の顧客グループが更新された場合に、会社の管理者に関連付けられます。 以前は、 `store_id` グループの更新時にデフォルトストアに変更されました。 <!--- MC-38196-->

![修正された問題](../assets/fix.svg) Adobe Commerceは、グループ化された商品を買い物かごに追加する場合と同じ方法で、グループ化された商品をシンプルな商品のリストとして購買依頼リストに保存するようになりました。 以前は、Adobe Commerceによるグループ化された商品の保存方法により、購買依頼リストからのグループ化された商品のリンクは、グループ化された商品ではなく、常にシンプルな商品にリダイレクトされていました。 <!--- MC-38049-->

![修正された問題](../assets/fix.svg) で注文をフィルタリングできるようになりました **[!UICONTROL Company Name]** 注文情報を CSV 形式で書き出す際のフィールド。 以前は、Adobe Commerceは次の場所にエラーを記録していました： `var/export/{file-id}`. <!--- MC-37785-->

![修正された問題](../assets/fix.svg) ストアフロントで「新規購買依頼リストの作成」タブを選択すると、Adobe Commerceに「購買依頼リストの作成」ポップアップが期待どおりに表示されるようになりました。 <!--- MC-37915-->

![修正された問題](../assets/fix.svg) 購買依頼リストには、リストに追加されたグループ化製品と数量がすべて含まれるようになりました。 以前は、商品の詳細ページから商品を追加した後に販売員が購買依頼リストに移動すると、Adobe Commerceにこのエラーが表示されていました。 `1 product(s) require your attention - Options were updated. Please review available configurations`. <!--- MC-37621-->

![修正された問題](../assets/fix.svg) マルチサイトデプロイメントで会社を作成する際、正しいストア表示が関連する web サイトに関連付けられるようになりました。 以前は会社を作成できず、Adobe Commerceにこのエラーが表示されていました。 `The store view is not in the associated website`. <!--- MC-37488-->

![修正された問題](../assets/fix.svg) クイックオーダーを使用して SKU で製品を並べ替えても、CSV ファイルで製品数量が重複しなくなりました。 <!--- MC-37427-->

![修正された問題](../assets/fix.svg) この **[!UICONTROL Add to Cart]** 次の場合、ボタンはブロックされなくなりました _[!UICONTROL Enter Multiple SKUs]_クイックオーダーページの「」セクションに空の値が含まれています。 代わりに、Adobe Commerceに有効な SKU を入力するように求めるメッセージが表示されるようになりました。 <!--- MC-37387-->

![修正された問題](../assets/fix.svg) Adobe Commerceは、購買依頼リストから商品レビューを発行すると、商品ページにこのメッセージを表示するようになりました。 `You submitted your review for moderation`. レビューは、保留中のレビューのページ（管理者）にも表示されます **[!UICONTROL Marketing]** > **[!UICONTROL Pending Reviews]**）に設定します。 以前は、Adobe Commerceは保留中のレビューのリストにレビューを追加しましたが、商品ページで 404 エラーが発生しました。 <!--- MC-37119-->

![修正された問題](../assets/fix.svg) のパフォーマンス `sharedCatalogUpdateCategoryPermissions` 消費者が改善されました。 共有カタログを作成した後、カタログ権限インデクサーは、すべての顧客グループではなく、共有カタログの顧客グループ ID のみを使用するようになりました。 <!--- MC-36770-->

![修正された問題](../assets/fix.svg) 買い物客のデフォルト以外の住所に関連付けられたカスタムの顧客住所属性フィールドが、ストアフロントのチェックアウトワークフローで期待どおりに保存されるようになりました。 <!--- MC-36630-->

![修正された問題](../assets/fix.svg) ストアのデフォルトの共有カタログに属する製品の注文は、管理 REST API （`rest/V1/carts/{<CART_ID>/items`）を使用してください。 Adobe Commerceは、でカタログ権限の検証を共有する前に、商品が公開カタログに割り当てられたかどうかを確認するようになりました `\Magento\SharedCatalog\Plugin\Quote\Api\ValidateAddProductToCartPlugin::beforeSave`. 以前は、Adobe Commerceは買い物客の買い物かごに商品を追加せず、次のエラーをスローしていました。 `No such shared catalog entity`. <!--- MC-36535-->

![修正された問題](../assets/fix.svg) Adobe Commerceは、Adobe Commerce ストアのアドレスから新しい会社ユーザー登録メールを送信するようになりました。 以前は、このメールは会社の管理者のアドレスから送信されていました。 <!--- MC-36480-->

![修正された問題](../assets/fix.svg) Adobe Commerceは、マーチャントに新しい属性の保存を許可する前に、予約済みの会社属性名の重複についてカスタム属性を確認するようになりました。 <!--- MC-36282-->

![修正された問題](../assets/fix.svg) この `credit_history` クエリでは、最初に割り当てられた金額と購入された金額の両方について、指定された会社のクレジット履歴を返すようになりました。 以前は、このクエリはエラーを返していました。

![修正された問題](../assets/fix.svg) この **[!UICONTROL Company]** および  **[!UICONTROL Job Title]** アカウント情報を編集ページのフィールドは編集できなくなりました。

### 既知の問題

- B2B 購入者は、オンライン支払い方法を使用して、通常の発注書フローをバイパスできます。 このシナリオは、購入者がチェックアウト全体の合計を 0 に減らし（プロモーションコードやギフトカードなど）、そのコードまたはギフトカードを削除した場合に発生する可能性があります。 そうした状況でも、Adobe Commerceは、割り当てられたカタログの商品の価格に基づいて正しい金額を注文します。 **_回避策_**：オンライン支払い方法で発注書の承認が有効になっている場合は、ギフトカードとクーポンコードを無効にします。 <!--- B2B-1603-->

- 購入者は、次の場合に PayPal Express Checkout を使用して発注書から注文を行おうとすると、買い物かごにリダイレクトされます **[!UICONTROL In-Context Mode]** が無効になっています。 <!--- B2B-1604-->

- 購入者が発注書を作成した後、チェックアウトページに移動すると、Adobe Commerceで 404 エラーが表示される場合があります。 このエラーは、購入者が、以前の購入を完了せずにチェックアウトページに移動する前に、オンラインの支払い方法を使用して別の発注書を以前に作成した場合に発生します。 買い手はまだ発注書を配置することができます。 **_回避する_**：なし。 <!--- B2B-1605-->

- 特定の支払い方法に対する割引は、購入者が最終チェックアウト中に支払い方法を変更した場合でも、発注書のチェックアウト中に保持されます。 その結果、お客様は権利のない割引を受けることができます。 この問題は、支払方法が変更されても、元の支払方法の買い物かごルールが引き続き適用されるために発生します。 **_回避する_**：なし。 を参照してください。 [Adobe Commerce 2.4.2 B2B 既知の問題：支払い方法が変更された後、オンライン発注書に対する割引が残ります](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/troubleshooting/payments/magento-2.4.2-b2b-discount-remains-pay-method-change.html) _ナレッジベース_ 記事。 <!-- B2B-1012 -->

- この `deleteRequisitionListOutput` クエリを実行すると、残りの購買依頼リストではなく、削除された購買依頼リストに関する詳細が戻されます。 <!--- MC-39894-->

## B2B v1.3.0

*2020 年 10 月 15 日（Pt）*

[!BADGE サポート]{type=Informative tooltip="サポート"}

このリリースには、注文承認、発送方法、買い物かご、管理者アクションのログ記録などの改善が含まれています。

![新規](../assets/new.svg) Adobe Commerce 2.4.1 がサポートされるようになりました。

![新規](../assets/new.svg) B2B 注文の承認が強化され、ユーザビリティが向上し、発注書に対する一括アクションが可能になりました。

![新規](../assets/new.svg) B2B のマーチャントは、各会社に提供される発送方法を制御できるようになりました。<!--- BUNDLE-160 161 162 -->

![新規](../assets/new.svg) マーチャントは、ユーザーが 1 回の操作で買い物かごの内容をクリアでき、この機能を各 web サイトで独立して設定できるようになりました <!--- BUNDLE-108 -->

![新規](../assets/new.svg) B2B 購入者は、個々の商品または買い物かごの内容全体を購買依頼リストに直接追加できるようになりました。 <!--- BUNDLE-145 144-->

![新規](../assets/new.svg) B2B マーチャントは、支払い方法として「アカウント内支払い」を使用することにより、顧客に代わって管理者から注文を作成できます。 <!--- BUNDLE-166 178-->

![新規](../assets/new.svg) マーチャントは、顧客の詳細ページからユーザーに関連付けられたすべての見積を直接表示できるようになりました。 <!--- BUNDLE-139 -->

![新規](../assets/new.svg) マーチャントは、Customers Now Online のグリッドを会社別にフィルタリングできるようになりました。 <!--- BUNDLE-137 -->

![新規](../assets/new.svg) 管理者は、管理者の顧客を営業担当者でフィルタリングできるようになりました。 <!--- BUNDLE-110 -->

![新規](../assets/new.svg) 不正なアカウントやスパムアカウントの作成を減らすために、マーチャントは、ストアフロントの新規会社リクエストフォームでGoogle reCAPTCHA を有効にできるようになりました。 <!--- BUNDLE-154 -->

![新規](../assets/new.svg) 会社モジュールで実行された管理者アクションは、管理アクションログに記録されるようになりました。 アクションは、関連するすべての会社モジュールから記録されます。 `Company`, `NegotiableQuote`, `CompanyCredit`, `SharedCatalog`.  <!--- BUNDLE-180 181 182 183 -->

![修正された問題](../assets/fix.svg) Adobe Commerceに **[!UICONTROL Delete customer]** のボタン **顧客** ログイン管理者が B2B がインストールされているデプロイメントの顧客を削除する権限を持っていない場合のページ。 <!--- MC-35655-->

![修正された問題](../assets/fix.svg) 顧客グリッドで顧客を編集する際、会社に割り当てられている顧客の顧客グループが自動的に変更されなくなりました。 <!--- MC-35254-->

![修正された問題](../assets/fix.svg) マーチャントが共有カタログを作成すると、権限が自動的にに設定されるようになりました。 `Allow` の場合 **[!UICONTROL Display Product Prices]** および **[!UICONTROL Add to Cart]** 顧客グループがカタログ権限設定でこのアクセス権を割り当てられたときのカテゴリの機能。 以前は、これらの設定は、自動的にに設定されていました `Deny` カタログの権限がに設定されている場合でも `Allow`.<!--- MC-34792-->

![修正された問題](../assets/fix.svg) 製品を製品の編集ページから編集した場合に、共有カタログカテゴリの権限が上書きされなくなりました。<!--- MC-34777-->

![修正された問題](../assets/fix.svg) マーチャントが以下を有効にすると、お客様が指定されたクレジット制限を超える権限を持っていることを確認するメール通知を、Adobe Commerceが送信するようになりました **[!UICONTROL Allow To Exceed Credit Limit]** の設定値。 以前は、Adobe Commerceから送信される通知メールで、お客様が制限を超える権限を持っていないことを示していました。 <!--- MC-34584-->

![修正された問題](../assets/fix.svg) 購買依頼リストの製品価格を囲むHTMLコンテナが、バンドルされた製品の子に対して正しく表示されるようになりました。 <!--- MC-36331-->

![修正された問題](../assets/fix.svg) マーチャントは、多言語デプロイメントで会社を作成する際に、会社ユーザーのメールが送信される言語を指定できるようになりました。 以前は、のドロップダウンメニューを使用すると、マーチャントは適切なストア表示を選択できましたが、言語は表示されませんでした。  <!--- MC-35777-->

![修正された問題](../assets/fix.svg) カスタムの顧客アドレス属性フィールドが、ストアフロントのチェックアウトワークフローで期待どおりに表示されるようになりました。 <!--- MC-35607-->

![修正された問題](../assets/fix.svg) 「B2B 機能の設定」タブが正しく開くようになりました。 <!--- MC-35458-->ゲストは QuickOrder を使用して商品を買い物かごに追加し、商品を正常に削除できるようになりました。 以前は、買い物客が QuickOrder を使用して買い物かごに複数の製品を追加してから、製品を削除しても、製品が削除されませんでした。 <!--- MC-35327-->

![修正された問題](../assets/fix.svg) 会社は、REST API PUTを使用して更新できるようになりました `/V1/company/:companyId` を指定しないでのリクエスト `region_id` 状態が次のように設定されている場合 **不要**. 以前は、 `region_id` は必須ではありません。指定されていない場合、Adobe Commerceがエラーをスローしました。 <!--- MC-35304-->

![修正された問題](../assets/fix.svg) REST API を使用して B2B 会社を作成または更新する場合（`http://magento.local/rest/V1/company/2`、ここで `2` は会社 ID を表します）。応答には、の設定が含まれるようになりました `applicable_payment_method` または `available_payment_methods` 期待どおりだ。 <!--- MC-35248-->

![修正された問題](../assets/fix.svg) マーチャントがを使用したときに、Adobe Commerceに 404 ページが表示されなくなりました **Enter** ボタンをクリックする代わりに、 **[!UICONTROL Save]** ストアフロントで購買依頼リストを作成する際のボタン。<!--- MC-35094-->

![修正された問題](../assets/fix.svg) 新しい製品が公開共有カタログに割り当てられても、カテゴリ権限が変更されなくなりました。 以前は、カテゴリ権限は複製されていました。 <!--- MC-34386-->

![修正された問題](../assets/fix.svg) REST API エンドポイントのPUT `rest/default/V1/company/{id}`会社のメールの更新に使用されるでは、大文字と小文字が区別されなくなりました。 <!--- MC-34308-->

![修正された問題](../assets/fix.svg) 報酬モジュールを無効にしても、顧客アカウントの B2B 機能に影響しなくなりました。 以前は、報酬モジュールが無効の場合、会社プロファイル、会社ユーザー、役割と権限などの B2B 関連のタブは表示されませんでした。<!--- MC-34191-->

![修正された問題](../assets/fix.svg) Adobe Commerceでは、会社アカウントに変更が加えられた場合、メール通知で正しい送信者名を使用するようになりました。 以前Adobe Commerceでは、すべてのメールに対して、デフォルトスコープで定義された一般的な連絡先の送信者名を使用していました。 <!--- MC-33917-->

![修正された問題](../assets/fix.svg) 物理製品と仮想製品の両方を含む注文に対して、マルチシッピングを正常に実装できるようになりました。 <!--- MC-33818-->

![修正された問題](../assets/fix.svg) マーチャントは、から会社ユーザーを作成できるようになりました _[!UICONTROL Company Users]_の場合の、マイアカウントおよび会社構造ページのセクション&#x200B;**[!UICONTROL Access Restriction]**が有効になっており、**[!UICONTROL Restriction Mode]**はに設定されています。 `Sales: Login Only`. 以前は、マーチャントがユーザーを作成しようとすると、Adobe Commerceがこのエラーをスローしていました。 `Can not register new customer due to restrictions are enabled`. <!--- MC-33608-->

![修正された問題](../assets/fix.svg) Adobe Commerceでは、お客様がアカウント情報を保存した際に、お客様のカスタマーグループをデフォルトにリセットしなくなりました。 <!--- MC-33554-->

![修正された問題](../assets/fix.svg) アクティブな買い物かごを持つお客様を、管理者が顧客グループに割り当てても、Adobe Commerceが致命的なエラーをスローしなくなりました。 <!--- MC-33313-->

![修正された問題](../assets/fix.svg) Adobe Commerceでは、次の機能を提供するようになりました `addToCart` クイックオーダーおよび購買依頼リストページ用の DataLayer イベント。  <!--- MC-33295-->

![修正された問題](../assets/fix.svg) 会社に割り当てられた営業担当者に送信される通知メールに、割り当てられた会社ロゴが含まれるようになりました。 以前は、通知メールには、アップロードされた企業ロゴではなく、デフォルトの LUMA ロゴが含まれていました。 <!--- MC-33232-->

![修正された問題](../assets/fix.svg) 購買依頼リストには、リストに追加されたすべてのグループ化製品と数量が含まれるようになりました。 以前は、商品の詳細ページから商品を追加した後に販売員が購買依頼リストに移動すると、Adobe Commerceにこのエラーが表示されていました。 `1 product(s) require your attention - Options were updated. Please review available configurations`. <!--- MC-32877-->

![修正された問題](../assets/fix.svg) この `products` クエリが正確なを返すようになりました `total_count` 共有カタログが有効な場合のフィールド。 <!--- MC-42268-->

![修正された問題](../assets/fix.svg) オンラインでの配送方法を無効にした後、会社の設定ページと会社の作成ページが期待どおりに動作するようになりました。 検証が追加され、無効になった出荷モジュールの処理が試行できなくなりました。 以前は、Adobe Commerceには次のエラーが表示されていました。 `Type Error occurred when creating object: Magento\CompanyShipping\Model\Source\ShippingMethod, Too few arguments to function Magento\CompanyShipping\Model\Source\ShippingMethod::__construct(), 1 passed in /var/www/html/elmtup/vendor/magento/framework/ObjectManager/Factory/AbstractFactory.php on line 121 and exactly 2 expected`. <!--- MC-43178-->

![修正された問題](../assets/fix.svg) 統合テスト用のメモリ消費が削減されました。これにより、テストのパフォーマンスが向上し、テスト完了に要する時間が短縮されます。 <!--- AC-266-->

## B2B v1.2.0

*2020 年 7 月 28 日（Pt）*

[!BADGE サポート]{type=Informative tooltip="サポート"}

![新規](../assets/new.svg) Adobe Commerce 2.4.0 がサポートされるようになりました。

![新規](../assets/new.svg) Marek Mularczyk 氏によるコントリビューションのおかげで追加された、ストアフロントの注文検索。 [ディバンテ](https://www.divante.com/) とコミュニティメンバー。

![新規](../assets/new.svg) 発注が強化され、書き換えられます。 これらは、Adobe Commerceにデフォルトで含まれるようになりました。

![新規](../assets/new.svg) 発注承認ルールが実装されました。 これらのルールを使用すると、ユーザーは注文の購入ルールを作成して、発注書ワークフローを制御できます。

![新規](../assets/new.svg) お客様としてログインは、Adobe Commerceにデフォルトで含まれるようになりました。 この機能を使用すると、サイト従業員は、顧客としてログインして表示内容を確認することで、顧客を支援できます。

![修正された問題](../assets/fix.svg) Elasticsearchを使用した階層型ナビゲーションで、属性の集計が正しく機能するようになりました

![修正された問題](../assets/fix.svg) 特殊文字による注文の検索が正常に機能するようになりました。

![修正された問題](../assets/fix.svg) 「」をクリック **[!UICONTROL Clear All]** ボタンを使用すると、フィルターを折りたたむのではなく、すべてのフィルターが展開されるようになりました。

![修正された問題](../assets/fix.svg) 製品 SKU/名前が注文履歴の検索フィルターの概要に含まれるようになりました。

![修正された問題](../assets/fix.svg) 並べ替えインジケーターがマイ発注書グリッドに正しく表示されるようになりました。

![修正された問題](../assets/fix.svg) これで、「承認」、「取消」、「拒否」および「発注」ボタンを 1 回だけクリックできます。 以前は、このボタンを複数回クリックすることができました。

![修正された問題](../assets/fix.svg) モバイルデバイスで、発注書の「承認」、「却下」、「キャンセル」および「検証」ボタンが正しくレンダリングされるようになりました。

![修正された問題](../assets/fix.svg) 以前は、失効済の値引が適用された発注を承認しても、発注は全額計上され、発注合計は更新されませんでした。 発注書合計が更新され、正しい合計が表示されるようになりました。

![修正された問題](../assets/fix.svg) 2.3.4 で導入された問題では、カスタム拡張属性が顧客住所から見積書住所にコピーされません。 この問題は修正されました。

![修正された問題](../assets/fix.svg) B2B がインストールされている場合、共有カタログにカテゴリを割り当てると、SQL エラーが表示されます。 この問題は修正されました。

![修正された問題](../assets/fix.svg) 変数タイプの値が正しくないため、管理者は設定可能な製品を注文に追加できませんでした。 オプションのドロップダウンは表示されません。 この機能は正常に動作するようになりました。

![修正された問題](../assets/fix.svg) 以前は、ログインしていないグループのカテゴリ権限を編集する場合、変更の保存時にエラーが発生していました。 この問題は修正されました。

![修正された問題](../assets/fix.svg) 修正が追加され、ストア管理者が共有カタログにない注文に製品を追加できるようになりました。 以前は、カタログにない項目を追加すると、エラーメッセージが表示されていました。

![修正された問題](../assets/fix.svg) 前回は、コマンドの実行後 `php bin/magento indexer:set-dimensions-mode catalog_product_price website` 次に、共有カタログを作成しようとすると、エラーが発生します。 この問題は修正されました。

![修正された問題](../assets/fix.svg) 会社を追加して、デフォルト以外の web サイトに会社管理者を割り当てると、間違ったサイト ID が送信され、エラーが発生していました。 この問題は修正されました。

![修正された問題](../assets/fix.svg) 以前は、顧客が別の顧客グループに移動された後に、を使用して注文に製品を追加していました _クイック注文_ はエラーで失敗します。 この問題は修正されました。

![修正された問題](../assets/fix.svg) 以前は、B2B の引用で WebAPI を使用してチェックアウトしようとすると、誤った値が API に送信され、エラーが発生していました。 この問題は修正されました。

![修正された問題](../assets/fix.svg) 以前は、API で会社を「アクティブ」に設定すると、エラーが発生していました。 この問題は修正されました。

![修正された問題](../assets/fix.svg) 不要なため `form` タグを付けます。提案された配送料を変更した後に Enter キーを押すと、注文ページが自動的に更新されます。 この問題は修正されました。

![修正された問題](../assets/fix.svg) 以前は、カタログページに製品の表示制限を設定し、その制限が製品の合計数より少なかった場合に、エラーが発生していました。 その機能は期待どおりに動作するようになりました。

![修正された問題](../assets/fix.svg) 以前は、会社の管理者を変更すると、元の管理者アドレスは新しい管理者にコピーされ、2 つのアドレスが与えられました。 現在は、正しいアドレスのみが追加されています。

![修正された問題](../assets/fix.svg) 以前は、Git が「Allowed and Notify Customer」に設定されている場合、API を使用して引用項目を保存すると失敗していました。 この API 呼び出しが期待どおりに動作するようになりました。

![修正された問題](../assets/fix.svg) 固定製品税が見積もりの詳細ページに表示されるようになりました。

![修正された問題](../assets/fix.svg) 以前は、「自分の見積」ページの「コメント」タブで添付ファイルをクリックしても、ファイルをダウンロードできませんでした。 この動作は期待どおりに動作するようになりました。

### 既知の問題

- 複数の web サイトをデプロイした環境で B2B 1.2.0 にアップグレードすると、Adobe Commerceで例外がスローされる。 条件 `setup:upgrade` を実行します。このエラーは `PurchaseOrder` モジュール： `Module Magento_PurchaseOrder: Unable to apply data patch Magento\PurchaseOrder\Setup\Patch\Data\InitPurchaseOrderSalesSequence for moduleMagento_PurchaseOrder`. **回避策**：をインストールします `B2B-716 Add NonTransactionableInterface` へのインターフェイス `InitPurchaseOrderSalesSequence` データパッチのホットフィックス。から使用できるようになりました。 **マイアカウント** > **Downloads** セクション `magento.com`.
- 発注（PO）が承認される前に割引コードの有効期限が切れた場合、発注には引き続き割引額が表示されますが、発注が承認されると、注文は割引前の合計に配置されます。 **回避策**：をインストールします `B2B-709 Purchase Order Discount patch` この問題のホットフィックス。から利用できるようになりました。 **マイアカウント** > **Downloads** セクション `magento.com`.
- 発注書を実際の注文に変換する際に、発注書の品目が在庫切れであるか、数量が不十分な場合は、エラーが発生します。 バックオーダーが有効な場合、オーダーは通常どおり処理されます。
