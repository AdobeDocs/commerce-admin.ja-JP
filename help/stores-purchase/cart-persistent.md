---
title: 買い物かごの永続性
description: 永続ショッピングカートが買い物かごの未購入アイテムを追跡し、顧客の次回の訪問に備えて情報を保存する方法を説明します。
exl-id: 95c336b3-77ac-4cf6-8fb5-23f4ac4b67d6
feature: Shopping Cart, Configuration
source-git-commit: 26d4bb35c6e1878a8ea8c5f05a982559e5d6dc35
workflow-type: tm+mt
source-wordcount: '1475'
ht-degree: 0%

---

# 買い物かごの永続性

永続的な買い物かごは、買い物かごに残った未購入の品目を追跡し、顧客の次回の訪問に備えて情報を保存します。 _記憶に残る_ 顧客は、次回ストアを訪問した際に、買い物かごの内容を復元させることができます。

永続的な買い物かごを使用すると、放棄された買い物かごの数を減らし、売上を増やすのに役立ちます。 永続的な買い物かごでは、機密アカウント情報はいつでも公開されないことを理解することが重要です。 永続的な買い物かごが使用中の間、登録済みのお客様とゲストの買い物客は、既存のアカウントにログインするか、チェックアウトを行う前にアカウントを作成する必要があります。 ゲストの買い物客にとって、以前のセッションから情報を取得する唯一の方法は、永続的な買い物かごです。

サイトまたは特定のストア表示内での買い物かごの永続性の使用を管理するには、[ 永続的な買い物かごの設定 ](#configure-a-persistent-cart) を指定できます。 これらの設定がストアフロントの買い物客エクスペリエンスに与える影響について詳しくは、[ 永続的な買い物かごワークフロー ](#persistent-cart-workflow) を参照してください。

>[!NOTE]
>
>永続的な買い物かごを使用する場合、サーバーセッションとセッション cookie の有効期間を長い期間に設定することをお勧めします。 詳しくは、[ セッションの有効期間 ](../customers/customer-online-options.md) を参照してください。

永続的な買い物かごを使用するには、顧客のブラウザーが Cookie を許可するように設定されている必要があります。 買い物かごの操作に使用される cookie には、次の 2 種類があります。

- **セッション cookie** – 短期的なセッション cookie は、サイトへの 1 回の訪問中に存在し、顧客が離脱するか、設定された期間が経過すると有効期限が切れます。

- **永続的な Cookie** – 永続的な永続的な Cookie は、セッションの終了後も存在し続け、将来の参照のために顧客の買い物かごの内容の記録を保存します。

## 永続的な買い物かごワークフロー

永続的な買い物かごが [ 有効 ](#configure-a-persistent-cart) になっている場合、ワークフローは次のものに依存します。

- _記憶する_ と _ログアウト時に永続性をクリア_ 設定の値
- 顧客が「このアカウントを記憶する _チェックボックスをオンまたはオフにした_ と
- 永続的な Cookie がクリアされた場合

永続的な cookie が適用されると、ページヘッダーに `Not Jane Smith?` リンクが表示されます。 このプロンプトを使用すると、永続セッションを終了してゲストとして作業を開始したり、別の顧客としてログインしたりできます。 システムは、顧客が後で店舗で買い物をするために異なるデバイスを使用した場合でも、買い物かごの内容の記録を保持します。 例えば、顧客はラップトップコンピューターから買い物かごに項目を追加し、モバイルデバイスから項目を追加し、タブレットからチェックアウトプロセスを完了できます。

ブラウザーごとに個別の独立した永続 cookie があります。 1 回の永続的セッションで顧客がストアにアクセスする際に複数のブラウザーを使用している場合、あるブラウザーで行われた変更は、ページの更新時に他のブラウザーに反映されます。 永続的な買い物かごを有効にしている間、ストアは、顧客がログインまたはアカウントを作成するために使用するブラウザーごとに個別の永続的な cookie を作成および管理します。

### 例：共有コンピューターで開いているセッション

ジェーンは休みの買い物を終わらせてがんばり続けている。 彼女はジョンへのプレゼントを買い物かごに、何かお母さんへのプレゼントを加える。 それから彼女はおやつを食べるために台所に行きます。

ジェーンが台所にいる間、ジョンはコンピューターに向かって軽い買い物をしている。 ページ上部の `Not Jane Smith?` リンクに気付かずに、彼はジェーンのために素敵なプレゼントを見つけて、それを買い物かごに追加します。 チェックアウトに行き、自分でログインすると、ジェーンの買い物かごの両方のアイテムが彼の買い物かごに追加されます。 John は非常に急いでいるので、_注文レビュー_ 中に追加の項目に気付かず、注文を送信します。 ジェーンの買い物かごは空になり、ジョンが贈り物を全部買い取りました。

### 記録する

お客様は、ログインページで「_このアカウントを記憶する_」チェックボックスを選択して、買い物かごの内容を保存できます。

| 私を覚えてる？ | 結果 |
| ------------ |  ------ |
| 個選択済み | 永続的な cookie を作成し、顧客の次のログインセッション用に買い物かごの内容を保存します。 |
| 未選択 | 永続的な cookie を作成せず、顧客の次のログインセッションの買い物かご情報を保存しません。 |

{style="table-layout:auto"}

### ログアウト時に永続性を続行 – なし

| アクション | 結果 |
| ------ | ------ |
| 顧客のログイン | 既に使用中のセッション cookie に加えて永続 cookie を呼び出します。 |
| 顧客がログアウトする | セッション cookie を削除しますが、永続的な cookie は有効なままです。 次回ユーザーがログインすると、買い物かごの項目が復元されるか、買い物かごに配置された新しい項目に追加されます。 |
| ユーザーがログアウトせず、セッション Cookie が期限切れになる | 永続的な cookie は有効なままです。 |

{style="table-layout:auto"}

### ログアウト時に永続性をクリア

| アクション | 結果 |
| ------ | ------ |
| 顧客のログイン | 既に使用中のセッション cookie に加えて永続 cookie を呼び出します。 |
| 顧客がログアウトする | 両方の Cookie を削除します。 |
| ユーザーはログアウトしないが、セッション Cookie の有効期限が切れる | 永続的な cookie は有効なままです。 |

{style="table-layout:auto"}

## 永続的な買い物かごの設定と効果

| 設定 | 効果 |
|----------|--------|
| **[!UICONTROL Enable Remember Me]** は `No` に設定されています。<br/><br/>**[!UICONTROL Clear Persistence on Log Out]**には値がありません。<br/><br/> ログインと登録ページでは** このアカウントを記憶する **チェックボックスを使用できません。 | 永続的な Cookie は使用されません。 |
| **[!UICONTROL Enable Remember Me]** は `Yes` に設定されています。<br/><br/>**[!UICONTROL Clear Persistence on Log Out]**には値がありません。<br/><br/>** 自分を記憶 **が選択されていません。 | セッション cookie は通常どおり適用され、永続 cookie は使用されません。 |
| **[!UICONTROL Enable Remember Me]** は `Yes` に設定されています。<br/><br/>**[!UICONTROL Clear Persistence on Log Out]**は `Yes` に設定されています。<br/><br/>** Remember Me **は `Yes` に設定されています。 | ユーザーがログインすると、両方の cookie が適用されます。 ユーザーがログアウトすると、両方の cookie が削除されます。 ユーザーがログインしていないのにセッション cookie の有効期限が切れている場合は、永続的な cookie が引き続き使用されます。 ログアウトの他に、永続 cookie は、有効期間が終了したり、顧客が `Not Jane Smith` リンクをクリックしたりすると削除されます。 |
| **[!UICONTROL Enable Remember Me]** は `Yes` に設定されています。<br/><br/>**[!UICONTROL Clear Persistence on Log Out]**は `No` に設定されています。<br/><br/>** Remember Me **は `Yes` に設定されています | ユーザーがログインすると、両方の cookie が適用されます。 ユーザーがログアウトすると、セッション Cookie は削除され、永続的なセッションが続行されます。 永続 cookie は、有効期間が終了するか、顧客が `Not Jane Smith` リンクをクリックすると削除されます。 |

{style="table-layout:auto"}

## 永続的な買い物かごの設定

永続的な買い物かごを設定する際に、Cookie の有効期間や、様々な顧客アクティビティで利用できるようにするオプションを指定できます。

これらの設定で顧客ワークフローが決定される方法について詳しくは、[ 永続的な買い物かごワークフロー ](#persistent-cart-workflow) を参照してください。

>[!NOTE]
>
>ユーザーのログイン中にセッション cookie が期限切れになっても、永続的な cookie はアクティブなままです。

1. _管理者_ サイドバーで、**[!UICONTROL Stores]**/_[!UICONTROL Settings]_/**[!UICONTROL Configuration]**に移動します。

1. 左側のパネルで「**[!UICONTROL Customers]**」を展開し、「**[!UICONTROL Persistent Shopping Cart]**」を選択します。

1. 永続的な買い物かごを有効にして追加のオプションを表示するには、**[!UICONTROL Enable Persistence]** を `Yes` に設定します。

   ![ 買い物かごの永続性の有効化と設定 ](../configuration-reference/customers/assets/persistent-shopping-cart-general.png){width="600" zoomable="yes"}

   これらの各設定について詳しくは、[_設定リファレンス_](../configuration-reference/customers/persistent-shopping-cart.md) を参照してください

   >[!NOTE]
   >
   >必要に応じて、「**[!UICONTROL Use system value]**」チェックボックスをオフにして、これらの設定を変更します。

1. **[!UICONTROL Persistence Lifetime (seconds)]**：永続 cookie の持続時間を秒単位で入力します。

   デフォルト値の 31,536,000 秒は 1 年に等しくなります。 最長 100 年です。

1. **[!UICONTROL Enable "Remember Me"]** を次のいずれかに設定します。

   - `Yes` - ストアのログイン ページに _自分を記憶する_ チェックボックスを表示します。これにより、顧客は買い物かごの情報を保存することができます。

   - `No` – 永続性は引き続き有効にできますが、顧客は情報を保存するかどうかを選択するオプションを与えられません。

1. 顧客の _このアカウントを記憶する_ チェックボックスを事前に選択するには、「**[!UICONTROL Remember Me Default Value]**」を「`Yes`」に設定します。

   お客様は必要に応じてこのオプションをオフにできます。

1. **[!UICONTROL Clear Persistence on Log Out]** を次のいずれかに設定します。

   - `Yes` – 登録済みの顧客がログアウトすると、買い物かごはクリアされます。

   - `No` – 登録済みの顧客がログアウトすると、買い物かごは保存されます。

   >[!NOTE]
   >
   >ユーザーがログイン中にセッション cookie が期限切れになった場合、永続的な cookie は使用されたままになります。

1. **[!UICONTROL Persist Shopping Cart]** を次のいずれかに設定します。

   - `Yes` - セッション cookie の有効期限が切れた場合、永続的な cookie は保持されます。 ゲストの買い物客が後でログインするかアカウントを作成すると、買い物かごは復元されます。

   - `No` - セッション cookie の有効期限が切れた後、ゲストに対して買い物かごが保持されない。

1. ![Adobe Commerce](../assets/adobe-logo.svg) （Adobe Commerceのみ） **[!UICONTROL Persist Wish List]** を設定して、セッションの終了時にお客様のウィッシュリストのステータスを保持するかどうかを決定します。

   - `Yes` - セッションが終了すると、ウィッシュリストのコンテンツが保存されます。

   - `No` - セッションが終了しても、ウィッシュリストは保存されません。

1. ![Adobe Commerce](../assets/adobe-logo.svg) （Adobe Commerceのみ） **[!UICONTROL Persist Recently Ordered Items]** を設定して、セッションの終了時に最近注文された商品のステータスを保持するかどうかを指定します。

   - `Yes` – 最近注文した項目の状態は、セッションの終了時に保存されます。

   - `No` – 最近注文した項目の状態は、セッションの終了時に保存されません。

1. **[!UICONTROL Persist Currently Compared Products]** を `Yes` または `No` に設定します。

1. **[!UICONTROL Persist Comparison History]** を `Yes` または `No` に設定します。

1. **[!UICONTROL Persist Recently Viewed Products]** を `Yes` または `No` に設定します。

1. ![Adobe Commerce](../assets/adobe-logo.svg) （Adobe Commerceのみ）セッションの終了時に顧客のグループメンバーシップのステートとセグメント化条件を保持するかどうかを指定するには、**[!UICONTROL Persist Customer Group Membership and Segmentation]** を設定します。

   - `Yes` – 顧客のグループメンバーシップの状態とセグメント化データは、セッションが終了すると保存されます。

   - `No` – 顧客のグループメンバーシップの状態とセグメント化データは、セッションが終了しても保存されません。

1. 「**[!UICONTROL Save Config]**」をクリックします。
