---
title: 買い物かごの持続性
description: 永続的な買い物かごが未購入の買い物かごの品目を追跡し、顧客の次の訪問に関する情報を保存する方法を説明します。
exl-id: 95c336b3-77ac-4cf6-8fb5-23f4ac4b67d6
feature: Shopping Cart, Configuration
source-git-commit: 26d4bb35c6e1878a8ea8c5f05a982559e5d6dc35
workflow-type: tm+mt
source-wordcount: '1473'
ht-degree: 0%

---

# 買い物かごの持続性

永続的な買い物かごは、買い物かごに残された未購入品目を追跡し、顧客の次の訪問に関する情報を保存します。 次の条件を満たす顧客： _記憶した_ 次回お店を訪れた際に、買い物かごの内容を復元することができます。

持続的な買い物かごを使用すると、買い物かごの放棄数を減らし、売上を増やすのに役立ちます。 永続的な買い物かごは、機密性の高いアカウント情報を常に表示しないことを理解することが重要です。 永続的な買い物かごは使用中ですが、登録顧客とゲスト買い物客の両方が、既存のアカウントにログインするか、チェックアウト前にアカウントを作成する必要があります。 ゲスト買い物客の場合、以前のセッションから情報を取得するには、永続的な買い物かごのみが使用されます。

サイトや特定のストア表示での買い物かごの持続性の使用を管理するには、 [永続的な買い物かごの設定](#configure-a-persistent-cart) 設定。 これらの設定がストアフロントの買い物客のエクスペリエンスに与える影響について詳しくは、 [永続的な買い物かごのワークフロー](#persistent-cart-workflow).

>[!NOTE]
>
>永続的な買い物かごを使用する場合は、サーバーセッションの有効期間とセッション cookie の有効期間を長期間に設定することをお勧めします。 詳しくは、 [セッションの有効期間](../customers/customer-online-options.md) を参照してください。

永続的な買い物かごを使用するには、顧客のブラウザーが cookie を許可するように設定されている必要があります。 買い物かごの操作に使用される Cookie には次の 2 種類があります。

- **セッション cookie**  — 短期間のセッション Cookie は、サイトへの 1 回の訪問中に存在し、顧客が離れたときまたは設定された期間の後に期限切れになります。

- **永続的な Cookie**  — セッションの終了後も、長期的で永続的な Cookie が存在し続け、将来の参照用に顧客の買い物かごの内容の記録を保存します。

## 永続的な買い物かごのワークフロー

永続的な買い物かごが [有効](#configure-a-persistent-cart)（ワークフローは次のものに依存します）。

- の値 _自分を記憶を有効にする_ および _ログアウト時に永続性をクリア_ 設定
- 顧客が _自分を記憶する_ チェックボックス
- 永続的な cookie がクリアされたとき

永続的な cookie が適用されると、 `Not Jane Smith?` リンクがページヘッダーに表示されます。 このプロンプトを表示すると、ユーザーは永続的なセッションを終了し、ゲストとして作業を開始したり、別のユーザーとしてログインしたりできます。 顧客が後で別のデバイスを使用して店舗で買い物をする場合でも、買い物かごの内容の記録は保持されます。 例えば、顧客はノートパソコンから買い物かごに品目を追加し、モバイルデバイスからさらに品目を追加して、タブレットからのチェックアウトプロセスを完了できます。

ブラウザーごとに独立した永続的 cookie が存在します。 1 回の永続的なセッション中に顧客がストアを訪問している間に複数のブラウザーを使用している場合、ページを更新すると、あるブラウザーで行った変更が他のブラウザーにも反映されます。 永続的な買い物かごが有効になっている間、ストアは、顧客がログインまたはアカウントの作成に使用するブラウザーごとに個別の永続的な cookie を作成し、維持します。

### 例：共有コンピューター上のオープンセッション

ジェーンは休日の買い物をしつこいセッションで終えようとしている。 彼女はジョンに贈り物を買い物かごに、そして母親に贈り物を付け加える。 それから彼女は台所におやつを食べに行く。

ジョンがキッチンにいる間、ジョンはパソコンに座って、簡単な買い物をします。 気が付かない場合 `Not Jane Smith?` リンクをクリックすると、ジェーンにとって素敵なプレゼントを見つけて、買い物かごに追加します。 自分でチェックアウトしてログインすると、ジェーンの買い物かごに両方の項目が追加されます。 ジョンは急いでいるので、次の間に追加の項目に気が付きませんでした _注文レビュー_：オーダーを送信します。 ジェーンの買い物かごは空になり、ジョンはギフトをすべて買いました。

### 自分を記憶する

お客様は、 _自分を記憶する_ チェックボックスをオンにして、買い物かごの内容を保存します。

| 私を覚えてる？ | 結果 |
| ------------ |  ------ |
| 選択済み | 永続的な Cookie を作成し、顧客が次にログインしたセッション用に買い物かごの内容を保存します。 |
| 未選択 | 永続的な cookie を作成せず、顧客が次にログインしたセッションで使用する買い物かごの情報は保存しません。 |

{style="table-layout:auto"}

### ログアウト時に永続化を続行 — いいえ

| アクション | 結果 |
| ------ | ------ |
| お客様のログイン | 既に使用されているセッション cookie に加えて、永続的な cookie を呼び出します。 |
| お客様のログアウト | セッション cookie を削除しますが、永続的な cookie は有効なままです。 顧客が次回ログインすると、買い物かごの項目が復元されるか、買い物かごに配置された新しい項目に追加されます。 |
| お客様はログアウトせず、セッション cookie の有効期限が切れます。 | 永続的な cookie は有効のままです。 |

{style="table-layout:auto"}

### ログアウト時に永続性をクリア

| アクション | 結果 |
| ------ | ------ |
| お客様のログイン | 既に使用されているセッション cookie に加えて、永続的な cookie を呼び出します。 |
| お客様のログアウト | 両方の cookie を削除します。 |
| お客様はログアウトせず、セッション Cookie の有効期限が切れます。 | 永続的な cookie は有効のままです。 |

{style="table-layout:auto"}

## 買い物かごの設定と効果の保持

| 設定 | 効果 |
|----------|--------|
| **[!UICONTROL Enable Remember Me]** が `No`.<br/><br/>**[!UICONTROL Clear Persistence on Log Out]**には任意の値があります。<br/><br/>The**&#x200B;自分を記憶する&#x200B;**「ログインと登録」ページでは、チェックボックスは使用できません。 | 永続的な cookie は使用されません。 |
| **[!UICONTROL Enable Remember Me]** が `Yes`.<br/><br/>**[!UICONTROL Clear Persistence on Log Out]**には任意の値があります。<br/><br/>**&#x200B;自分を記憶する&#x200B;**が選択されていません。 | セッション cookie は通常どおり適用されます。永続的な cookie は使用されません。 |
| **[!UICONTROL Enable Remember Me]** が `Yes`.<br/><br/>**[!UICONTROL Clear Persistence on Log Out]**が `Yes`.<br/><br/>**&#x200B;自分を記憶する&#x200B;**が `Yes`. | 顧客がログインすると、両方の cookie が適用されます。 ユーザーがログアウトすると、両方の Cookie が削除されます。 ユーザーがログインせずにセッション Cookie の有効期限が切れた場合でも、永続的な Cookie が使用されます。 ログアウトとは別に、永続的な cookie は、有効期間が切れたときや、顧客が `Not Jane Smith` リンク。 |
| **[!UICONTROL Enable Remember Me]** が `Yes`.<br/><br/>**[!UICONTROL Clear Persistence on Log Out]**が `No`.<br/><br/>**&#x200B;自分を記憶する&#x200B;**が `Yes` | 顧客がログインすると、両方の cookie が適用されます。 顧客がログアウトすると、セッション cookie が削除され、永続的なセッションが続行されます。 永続的な cookie は、有効期間が終了した場合や、顧客が `Not Jane Smith` リンク。 |

{style="table-layout:auto"}

## 永続的な買い物かごの設定

永続的な買い物かごの設定時に、Cookie の有効期間と、様々な顧客アクティビティで利用できるようにするオプションを指定できます。

これらの設定による顧客ワークフローの決定方法について詳しくは、 [永続的な買い物かごのワークフロー](#persistent-cart-workflow).

>[!NOTE]
>
>ユーザーのログイン中にセッション Cookie の有効期限が切れた場合、永続的な Cookie はアクティブなままになります。

1. 次の日： _管理者_ サイドバー、移動 **[!UICONTROL Stores]** > _[!UICONTROL Settings]_>**[!UICONTROL Configuration]**.

1. 左側のパネルで、を展開します。 **[!UICONTROL Customers]** を選択します。 **[!UICONTROL Persistent Shopping Cart]**.

1. 永続的な買い物かごを有効にし、追加のオプションを表示するには、 **[!UICONTROL Enable Persistence]** から `Yes`.

   ![買い物かごの持続性の有効化と設定](../configuration-reference/customers/assets/persistent-shopping-cart-general.png){width="600" zoomable="yes"}

   これらの各設定について詳しくは、 [_設定リファレンス_](../configuration-reference/customers/persistent-shopping-cart.md)

   >[!NOTE]
   >
   >必要に応じて、 **[!UICONTROL Use system value]** チェックボックスを使用して、これらの設定を変更できます。

1. の場合 **[!UICONTROL Persistence Lifetime (seconds)]**&#x200B;に設定し、永続的な cookie の持続時間を秒単位で入力します。

   デフォルト値の 31,536,000 秒は 1 年に等しくなります。 許容される最大時間は 100 年です。

1. 設定 **[!UICONTROL Enable "Remember Me"]** を次のいずれかに変更します。

   - `Yes` - _自分を記憶する_ 」チェックボックスをオンにします。

   - `No`  — 永続性は引き続き有効にできますが、情報を保存するかどうかを選択するオプションはお客様に与えられません。

1. 事前に _自分を記憶する_ 顧客のチェックボックス、 **[!UICONTROL Remember Me Default Value]** から `Yes`.

   顧客が選択した場合は、このオプションをクリアできます。

1. 設定 **[!UICONTROL Clear Persistence on Log Out]** を次のいずれかに変更します。

   - `Yes`  — 登録済み顧客がログアウトすると、買い物かごはクリアされます。

   - `No`  — 登録済み顧客がログアウトすると、買い物かごは保存されます。

   >[!NOTE]
   >
   >顧客がログイン中にセッション cookie の有効期限が切れた場合、永続的な cookie は使用されたままになります。

1. 設定 **[!UICONTROL Persist Shopping Cart]** を次のいずれかに変更します。

   - `Yes` ：セッション cookie の有効期限が切れた場合、永続的な cookie は保持されます。 ゲスト買い物客が後でログインしたりアカウントを作成したりすると、買い物かごが復元されます。

   - `No`  — セッション Cookie の有効期限が切れた後、買い物かごはゲストに対して保持されません。

1. ![Adobe Commerce](../assets/adobe-logo.svg) (Adobe Commerceのみ ) 設定 **[!UICONTROL Persist Wish List]** セッションが終了したときに顧客ウィッシュリストの状態が保持されるかどうかを判断するには、次の手順に従います。

   - `Yes`  — ウィッシュリストの内容は、セッションの終了時に保存されます。

   - `No`  — セッションが終了したときにウィッシュリストは保存されません。

1. ![Adobe Commerce](../assets/adobe-logo.svg) (Adobe Commerceのみ ) 設定 **[!UICONTROL Persist Recently Ordered Items]** 最近順序付けされた項目の状態がセッションの終了時に保持されるかどうかを判断するには、次の手順に従います。

   - `Yes`  — 最近注文された項目の状態は、セッションが終了したときに保存されます。

   - `No`  — セッションが終了したときに、最近注文された項目の状態が保存されません。

1. 設定 **[!UICONTROL Persist Currently Compared Products]** から `Yes` または `No`.

1. 設定 **[!UICONTROL Persist Comparison History]** から `Yes` または `No`.

1. 設定 **[!UICONTROL Persist Recently Viewed Products]** から `Yes` または `No`.

1. ![Adobe Commerce](../assets/adobe-logo.svg) (Adobe Commerceのみ ) 設定 **[!UICONTROL Persist Customer Group Membership and Segmentation]** お客様のグループメンバーシップとセグメント化条件の状態がセッション終了時に保持されるかどうかを判断するには、次の手順を実行します。

   - `Yes`  — 顧客のグループメンバーシップとセグメント化データの状態は、セッションが終了したときに保存されます。

   - `No`  — セッションが終了したときに、顧客のグループメンバーシップとセグメント化データの状態が保存されません。

1. クリック **[!UICONTROL Save Config]**.
